<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GlowbotsLive - Voice Agent</title>

    <style>
      *{margin:0;padding:0;box-sizing:border-box}
      body{
        height:100vh;
        background:#000;
        overflow:hidden;
        position:relative;
      }

      /* BUSINESS NAME TOP-LEFT */
      #brand-title{
        position:fixed;
        top:20px;
        left:20px;
        font-family: 'Segoe UI', Tahoma, sans-serif;
        font-size:28px;
        font-weight:600;
        color:#00e6e6;
        text-shadow:0 0 12px cyan;
        letter-spacing:1px;
        z-index:99999;
      }

      /* SMALLER GLOWBOT IMAGE BOTTOM-LEFT */
      #glowbot-img{
        position:fixed;
        bottom:20px;
        left:20px;
        width:20%;
        max-width:180px;
        opacity:0.9;
        pointer-events:none;
      }

      /* BUTTON NOW LOWER ON PAGE (MOVED DOWN 50%) */
      #voice-button{
        position:fixed;top:75%;left:50%;transform:translate(-50%,-50%);
        width:60px;height:60px;border-radius:50%;border:none;cursor:pointer;

        background:linear-gradient(135deg, #00e6e6, #008c8c);
        box-shadow:
          0 0 20px rgba(0,255,255,0.9),
          0 0 40px rgba(0,255,255,0.6),
          inset 0 -3px 12px rgba(0,0,0,0.45);

        animation:tealPulse 2s infinite;
        transition:all .3s;
        z-index:9999;
      }

      #voice-button:hover{
        transform:translate(-50%,-50%) scale(1.2);
        box-shadow:
          0 0 30px rgba(0,255,255,1),
          0 0 55px rgba(0,255,255,0.9);
      }

      #voice-button.listening{
        animation:tealPulseFast 1s infinite;
        background:linear-gradient(135deg, #00ffff, #00bfbf);
        box-shadow:0 0 60px #00ffff, 0 0 100px #00ffff;
      }

      @keyframes tealPulse{
        0%,100% { box-shadow:0 0 20px cyan,0 0 40px rgba(0,255,255,0.6) }
        50% { box-shadow:0 0 30px cyan,0 0 60px rgba(0,255,255,0.9) }
      }

      @keyframes tealPulseFast{
        0%,100% { box-shadow:0 0 60px cyan,0 0 100px cyan }
        50% { box-shadow:0 0 80px cyan,0 0 130px cyan }
      }

      /* TEXT UNDER BUTTON */
      .status{
        position:fixed;
        top:calc(75% + 55px); /* positions text under button */
        left:50%;
        transform:translateX(-50%);
        color:#00ffff;
        font:20px system-ui;
        text-shadow:0 0 12px cyan;
        opacity:0.9;
        text-align:center;
      }
    </style>
  </head>
  <body>

    <!-- BUSINESS NAME -->
    <div id="brand-title">Glowbots.app</div>

    <!-- BOT IMAGE (20%, bottom-left) -->
    <img id="glowbot-img" src="glowbot.png" alt="Glowbot">

    <button id="voice-button"></button>

    <!-- UPDATED TEXT UNDER BUTTON -->
    <div class="status" id="status">Kelly5 — Push to Talk</div>

    <script src="https://cdn.jsdelivr.net/gh/balacodeio/Vapi-Web-UMD@latest/dist/latest/vapi-web-bundle.min.js"></script>

    <script>
      const button = document.getElementById('voice-button');
      const status = document.getElementById('status');

      let vapi = null;

      function initVapi() {
        if (window.Vapi) {
          vapi = new window.Vapi("b66ad6e7-ec9d-421c-88b7-157068b27f6d");

          status.textContent = "Kelly5 — Push to Talk";

          vapi.on("call-start", () => {
            button.classList.add("listening");
            status.textContent = "Listening… speak now!";
          });

          vapi.on("call-end", () => {
            button.classList.remove("listening");
            status.textContent = "Kelly5 — Push to Talk";
          });

          vapi.on("error", (e) => {
            console.error("Vapi error:", e);
            status.textContent = "Error — check console";
            button.classList.remove("listening");
          });
        } else {
          status.textContent = "SDK failed to load — reload page";
        }
      }

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initVapi);
      } else {
        initVapi();
      }

      button.addEventListener("click", () => {
        if (!vapi) {
          status.textContent = "SDK not ready — wait or reload";
          return;
        }
        if (button.classList.contains("listening")) {
          vapi.stop();
        } else {
          status.textContent = "Connecting…";
          vapi.start("1dadddca-84c7-44a8-b5cd-7505b6b52cff");
        }
      });
    </script>
  </body>
</html>
