<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GlowbotsLive - Voice Agent</title>

    <style>
      *{margin:0;padding:0;box-sizing:border-box}

      /* BLACK BACKGROUND */
      body{
        height:100vh;
        background:#000;
        overflow:hidden;
      }

      /* Glowbot bottom-left */
      .bot-img {
        position: fixed;
        bottom: 20px;
        left: 20px;
        width: 30%;
        height: auto;
        z-index: 2;
        pointer-events: none;
      }

      /* Brand top-left */
      .brand {
        position: fixed;
        top: 15px;
        left: 20px;
        color: #5af2ff;
        font: 28px 'Segoe UI', sans-serif;
        font-weight: 700;
        letter-spacing: 1px;
        text-shadow: 0 0 12px #00eaff;
        z-index: 9999;
      }

      /* BUTTON (unchanged) */
      #voice-button{
        position:fixed;
        left:50%;
        transform:translateX(-50%);
        bottom:50%;
        width:105px;
        height:105px;
        border-radius:50%;
        border:none;
        cursor:pointer;
        background:linear-gradient(135deg, #2af3ff, #00cdd6);
        box-shadow:0 8px 60px rgba(0,255,255,0.6),
                   inset 0 -6px 20px rgba(0,0,0,0.35);
        transition:all .35s;
        z-index:9999;
      }
      #voice-button:hover{
        transform:translateX(-50%) scale(1.28);
        box-shadow:0 15px 90px rgba(0,255,255,1);
      }
      #voice-button.listening{
        background:linear-gradient(135deg, #4cffff, #00e7ff);
        box-shadow:0 0 110px #00faff, 0 0 160px #00faff;
        animation:tealpulse 1.4s infinite;
      }
      @keyframes tealpulse{
        0%,100%{box-shadow:0 0 110px #00faff,0 0 160px #00faff}
        70% {box-shadow:0 0 150px #00faff,0 0 210px #00faff}
      }

      /* TEXT — 2 lines now */
      .status{
        position:fixed;
        left:50%;
        transform:translateX(-50%);
        bottom:40%; /* spacing under button */
        color:#5af7ff;
        font:20px system-ui;
        text-align:center;
        text-shadow:0 0 10px #00eaff;
        opacity:0.90;
        line-height:1.4;
        z-index:9999;
      }
    </style>
  </head>

  <body>

    <div class="brand">GlowbotsLive</div>

    <img src="glowbot.png" class="bot-img">

    <button id="voice-button"></button>

    <!-- TEXT IN 2 LINES -->
    <div class="status" id="status">
      Kelly5<br>push to talk
    </div>

    <script src="https://cdn.jsdelivr.net/gh/balacodeio/Vapi-Web-UMD@latest/dist/latest/vapi-web-bundle.min.js"></script>

    <script>
      const button = document.getElementById('voice-button');
      const status = document.getElementById('status');

      let vapi = null;

      function initVapi() {
        if (window.Vapi) {
          vapi = new window.Vapi("b66ad6e7-ec9d-421c-88b7-157068b27f6d");
          status.innerHTML = "Kelly5<br>push to talk";

          vapi.on("call-start", () => {
            button.classList.add("listening");
            status.innerHTML = "Kelly5<br>Listening…";
          });

          vapi.on("call-end", () => {
            button.classList.remove("listening");
            status.innerHTML = "Kelly5<br>push to talk";
          });

          vapi.on("error", (e) => {
            console.error("Vapi error:", e);
            status.innerHTML = "Kelly5<br>Error — check console";
            button.classList.remove("listening");
          });
        } else {
          status.innerHTML = "Kelly5<br>SDK failed to load";
        }
      }

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initVapi);
      } else {
        initVapi();
      }

      button.addEventListener("click", () => {
        if (!vapi) {
          status.innerHTML = "Kelly5<br>SDK not ready";
          return;
        }
        if (button.classList.contains("listening")) {
          vapi.stop();
        } else {
          status.innerHTML = "Kelly5<br>Connecting…";
          vapi.start("78a7055c-03c4-4d29-8621-b2bf2b7333ad");
        }
      });
    </script>

  </body>
</html>
