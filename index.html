<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GlowbotsLive - Voice Agent</title>

    <style>
      *{margin:0;padding:0;box-sizing:border-box}

      /* BLACK BACKGROUND */
      body{
        min-height:100vh;
        background:#000;
        overflow:hidden;
        font-family: system-ui, 'Segoe UI', Roboto, Arial;
      }

      /* Brand top-left */
      .brand {
        position: fixed;
        top: 15px;
        left: 20px;
        color: #ff66d9;
        font: 28px 'Segoe UI', sans-serif;
        font-weight: 700;
        letter-spacing: 1px;
        text-shadow: 0 0 18px rgba(255,102,217,0.35);
        z-index: 9999;
      }

      /* NAVBAR (added) */
      .nav {
        position: fixed;
        top: 14px;
        right: 18px;
        z-index: 9999;
        display:flex;
        gap:10px;
        align-items:center;
        background: rgba(255,255,255,0.03);
        padding: 8px 12px;
        border-radius: 12px;
        backdrop-filter: blur(6px);
        border: 1px solid rgba(255,102,217,0.08);
      }
      .nav a {
        color: #ffd6f6;
        text-decoration: none;
        padding:6px 10px;
        border-radius:8px;
        font-weight:600;
        font-size:14px;
        transition: all .18s;
        text-shadow: 0 0 8px rgba(255,102,217,0.2);
      }
      .nav a:hover{
        transform: translateY(-3px);
        box-shadow: 0 6px 30px rgba(255,102,217,0.12);
        background: linear-gradient(90deg, rgba(255,102,217,0.06), rgba(255,86,196,0.03));
      }

      /* Glowbot bottom-left */
      .bot-img {
        position: fixed;
        bottom: 20px;
        left: 20px;
        width: 28%;
        height: auto;
        z-index: 2;
        pointer-events: none;
        opacity:0.98;
      }

      /* CHANGE #1 — WIDGET BUTTON COLOR (pink neon) */
      #voice-button{
        position:fixed;
        left:50%;
        transform:translateX(-50%);
        bottom:50%;
        width:105px;
        height:105px;
        border-radius:50%;
        border:none;
        cursor:pointer;
        background:linear-gradient(135deg, #ff2adf, #ff64f3); /* pink gradient */
        box-shadow:0 10px 80px rgba(255,0,200,0.28),
                   inset 0 -6px 20px rgba(0,0,0,0.35);
        transition:all .35s;
        z-index:9999;
      }
      #voice-button:hover{
        transform:translateX(-50%) scale(1.18);
        box-shadow:0 18px 120px rgba(255,0,200,0.5);
      }
      #voice-button.listening{
        background:linear-gradient(135deg, #ff92ff, #ff55ff);
        box-shadow:0 0 140px #ff7aff, 0 0 220px #ff7aff;
        animation: pinkpulse 1.4s infinite;
      }
      @keyframes pinkpulse{
        0%,100%{box-shadow:0 0 120px #ff7aff,0 0 180px #ff7aff}
        70% {box-shadow:0 0 180px #ff7aff,0 0 260px #ff7aff}
      }

      /* TEXT — status */
      .status{
        position:fixed;
        left:50%;
        transform:translateX(-50%);
        bottom:40%;
        color:#ffd6f6;
        font:20px system-ui;
        text-align:center;
        text-shadow:0 0 12px rgba(255,102,217,0.12);
        opacity:0.95;
        line-height:1.4;
        z-index:9999;
        white-space:pre-line;
      }

      /* small responsive adjustments */
      @media (max-width:640px){
        .bot-img{width:44%}
        .brand{font-size:20px}
        .nav{padding:6px 8px}
        .nav a{font-size:13px}
        #voice-button{width:86px;height:86px}
        .status{font-size:16px;bottom:36%}
      }
    </style>
  </head>

  <body>

    <div class="brand">GlowbotsLive</div>

    <!-- NAVBAR (matches theme) -->
    <nav class="nav" aria-label="Main navigation">
      <a href="neon9.html">Neon9</a>
      <a href="admin.html">Admin</a>
      <a href="onboarding.html">Onboarding</a>
      <a href="service.html">Service</a>
    </nav>

    <img src="glowbot.png" class="bot-img" alt="Glowbot">

    <button id="voice-button" aria-label="Push to speak to an agent"></button>

    <!-- CHANGE #3 — label text updated -->
    <div class="status" id="status">
      Push to speak to an agent
    </div>

    <script src="https://cdn.jsdelivr.net/gh/balacodeio/Vapi-Web-UMD@latest/dist/latest/vapi-web-bundle.min.js"></script>

    <script>
      const button = document.getElementById('voice-button');
      const status = document.getElementById('status');

      let vapi = null;

      function initVapi() {
        if (window.Vapi) {
          vapi = new window.Vapi("b66ad6e7-ec9d-421c-88b7-157068b27f6d");
          status.innerHTML = "Neon9\nPush to speak to an agent";

          vapi.on("call-start", () => {
            button.classList.add("listening");
            status.innerHTML = "Neon9\nListening…";
          });

          vapi.on("call-end", () => {
            button.classList.remove("listening");
            status.innerHTML = "Neon9\nPush to speak to an agent";
          });

          vapi.on("error", (e) => {
            console.error("Vapi error:", e);
            status.innerHTML = "Neon9\nError — check console";
            button.classList.remove("listening");
          });
        } else {
          status.innerHTML = "Neon9\nSDK failed to load";
        }
      }

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initVapi);
      } else {
        initVapi();
      }

      button.addEventListener("click", () => {
        if (!vapi) {
          status.innerHTML = "Neon9\nSDK not ready";
          return;
        }
        if (button.classList.contains("listening")) {
          vapi.stop();
        } else {
          status.innerHTML = "Neon9\nConnecting…";
          vapi.start("78a7055c-03c4-4d29-8621-b2bf2b7333ad");
        }
      });
    </script>

    <!-- CHANGE #2 — REUSABLE SCRIPT SECTION (paste into neon9/admin/onboarding/service pages) -->
    <script>
      /**
       * GlowbotsLive: Shared page script
       * - Console logs initialization
       * - Provides a hook for page-specific logic (e.g., highlight active nav link)
       * - Drop this block into neon9.html, admin.html, onboarding.html, service.html
       */
      document.addEventListener("DOMContentLoaded", function () {
        console.log("GlowbotsLive voice widget initialized on:", window.location.pathname);

        // Example: mark the active nav link automatically
        try {
          const path = window.location.pathname.split("/").pop().toLowerCase();
          const navLinks = document.querySelectorAll('.nav a');
          navLinks.forEach(a => {
            const href = a.getAttribute('href') || '';
            if (href.toLowerCase().includes(path) || (path === '' && href.includes('neon9'))) {
              a.style.boxShadow = '0 6px 30px rgba(255,102,217,0.12)';
              a.style.background = 'linear-gradient(90deg, rgba(255,102,217,0.06), rgba(255,86,196,0.03))';
            }
          });
        } catch (err) {
          console.warn('Nav highlight script failed', err);
        }

        // Add any shared helpers for future pages below
        // e.g., shared analytics ping, feature flags, or common UI behaviors
      });
    </script>

  </body>
</html>
