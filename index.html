<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GlowbotsLive - Voice Agent</title>
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{height:100vh;background:#000;overflow:hidden;}
    .bot-img {position: fixed; bottom:20px; left:20px; width:20%; height:auto; z-index:2; pointer-events:none;}
    .brand {position: fixed; top:15px; left:20px; color:#5af2ff; font:28px 'Segoe UI', sans-serif; font-weight:700; letter-spacing:1px; text-shadow:0 0 12px #00eaff; z-index:9999;}

    /* BUTTONS */
    .voice-button {
      position:fixed;
      left:50%;
      transform:translateX(-50%);
      width:105px;
      height:105px;
      border-radius:50%;
      border:none;
      cursor:pointer;
      box-shadow:0 8px 60px rgba(0,255,255,0.6), inset 0 -6px 20px rgba(0,0,0,0.35);
      transition: all .35s;
      z-index:9999;
    }
    #voice-button { bottom:30%; background:linear-gradient(135deg, #2af3ff, #00cdd6);}
    #voice-button:hover {transform:translateX(-50%) scale(1.28); box-shadow:0 15px 90px rgba(0,255,255,1);}
    #voice-button.listening { background:linear-gradient(135deg, #4cffff, #00e7ff); box-shadow:0 0 110px #00faff, 0 0 160px #00faff; animation:tealpulse 1.4s infinite;}
    @keyframes tealpulse {0%,100%{box-shadow:0 0 110px #00faff,0 0 160px #00faff}70%{box-shadow:0 0 150px #00faff,0 0 210px #00faff}}

    #merideth-button { bottom:50%; background:linear-gradient(135deg, #ff6ed9, #ff3399);}
    #merideth-button:hover {transform:translateX(-50%) scale(1.28); box-shadow:0 15px 90px rgba(255,50,200,1);}
    #merideth-button.listening { background:linear-gradient(135deg, #ff85e0, #ff1ab3); box-shadow:0 0 110px #ff4de0,0 0 160px #ff1ab3; animation:pinkpulse 1.4s infinite;}
    @keyframes pinkpulse {0%,100%{box-shadow:0 0 110px #ff4de0,0 0 160px #ff1ab3}70%{box-shadow:0 0 150px #ff4de0,0 0 210px #ff1ab3}}

    /* STATUS TEXT UNDER KELLY5 */
    .status {position:fixed; left:50%; transform:translateX(-50%); bottom:22%; color:#5af7ff; font:20px system-ui; text-align:center; text-shadow:0 0 10px #00eaff; opacity:0.95; line-height:1.4; z-index:9999;}
  </style>
</head>
<body>
  <div class="brand">Glowbots.app</div>
  <img src="glowbot.png" class="bot-img">

  <!-- BUTTONS -->
  <button id="voice-button" class="voice-button"></button>
  <button id="merideth-button" class="voice-button"></button>

  <div class="status" id="status">Kelly5<br>push to talk</div>

  <script>
    const kellyBtn = document.getElementById('voice-button');
    const meridethBtn = document.getElementById('merideth-button');
    const status = document.getElementById('status');

    // Helper to call VAPI via proxy
    async function startCall(agent) {
      const res = await fetch(`http://localhost:3000/vapi/${agent}`, { // change host if deployed
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify({ action: "start" })
      });
      return res.json();
    }

    // KELLY5 BUTTON
    kellyBtn.addEventListener("click", async () => {
      if (kellyBtn.classList.contains("listening")) {
        kellyBtn.classList.remove("listening");
      } else {
        kellyBtn.classList.add("listening");
        status.innerHTML = "Kelly5<br>Connecting…";
        try { await startCall("kelly"); status.innerHTML = "Kelly5<br>Listening…"; }
        catch(e){ console.error(e); kellyBtn.classList.remove("listening"); status.innerHTML="Kelly5<br>Error"; }
      }
    });

    // MERIDETH BUTTON
    meridethBtn.addEventListener("click", async () => {
      if (meridethBtn.classList.contains("listening")) {
        meridethBtn.classList.remove("listening");
      } else {
        meridethBtn.classList.add("listening");
        try { await startCall("merideth"); }
        catch(e){ console.error(e); meridethBtn.classList.remove("listening"); }
      }
    });

  </script>
</body>
</html>
