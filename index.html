<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GlowbotsLive - Voice Agent</title>
    <link rel="icon" href="/robot.png" />

    <!-- Official Vapi Web SDK (2025) -->
    <script src="https://cdn.vapi.ai/web/v1/vapi.js"></script>

    <style>
      * { margin:0; padding:0; box-sizing:border-box; }
      body { height:100vh; background:#000; overflow:hidden; }

      #voice-button {
        position:fixed;
        top:50%; left:50%;
        transform:translate(-50%,-50%);
        width:150px; height:150px;
        border-radius:50%;
        border:none;
        cursor:pointer;
        background:linear-gradient(145deg, #ffd700, #ffb800); /* Rich gold */
        box-shadow:0 15px 60px rgba(255,215,0,0.7), inset 0 -8px 20px rgba(0,0,0,0.2);
        transition:all .3s ease;
        z-index:9999;
      }

      #voice-button:hover {
        transform:translate(-50%,-50%) scale(1.2);
        box-shadow:0 20px 80px rgba(255,215,0,0.9);
      }

      #voice-button.listening {
        background:linear-gradient(145deg, #ffff00, #ffea00);
        box-shadow:0 0 100px #ffff00, 0 0 140px #ffff00;
        animation:gold-pulse 1.5s infinite;
      }

      @keyframes gold-pulse {
        0%,100% { box-shadow:0 0 100px #ffff00, 0 0 140px #ffff00; }
        70%     { box-shadow:0 0 140px #ffff00, 0 0 200px #ffff00; }
      }

      .status {
        position:fixed;
        bottom:40px;
        left:50%;
        transform:translateX(-50%);
        color:#ff0;
        font:16px system-ui, sans-serif;
        text-shadow:0 0 10px #ff0;
        opacity:0.9;
      }
    </style>
  </head>

  <body>
    <button id="voice-button" title="Click to talk to your AI"></button>
    <div class="status" id="status">Click the gold button to speak</div>

    <script>
      const button = document.getElementById('voice-button');
      const status = document.getElementById('status');

      // Current Vapi SDK (2025) – use window.vapiSDK
      const vapi = window.vapiSDK;

      // Initialize with your public key
      vapi.create({
        publicKey: "b66ad6e7-ec9d-421c-88b7-157068b27f6d"
      });

      // Events
      vapi.on("call-start", () => {
        button.classList.add("listening");
        status.textContent = "Listening… speak now!";
      });

      vapi.on("call-end", () => {
        button.classList.remove("listening");
        status.textContent = "Call ended — click to talk again";
      });

      vapi.on("error", (e) => {
        console.error("Vapi error:", e);
        status.textContent = "Error — check console";
        button.classList.remove("listening");
      });

      // Click to start/stop
      button.addEventListener("click", () => {
        if (button.classList.contains("listening")) {
          vapi.stop();
        } else {
          status.textContent = "Connecting…";
          vapi.start({
            assistantId: "1dadddca-84c7-44a8-b5cd-7505b6b52cff"
          });
        }
      });

      console.log("Gold voice button ready!");
    </script>
  </body>
</html>
