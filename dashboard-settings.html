<!doctype html>
<html lang="en" data-theme="dark-blue">
<head>
  <meta charset="utf-8" />
  <title>Settings</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />

  <link rel="stylesheet" href="theme-system.css">

  <style>
    body {
      margin:0;
      padding:0;
      font-family:system-ui;
      background:var(--bg-primary);
      color:var(--text-primary);
    }

    /* ---------- THEME PICKER ---------- */
    .theme-section-header {
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:20px;
      background:var(--bg-card);
      border-radius:12px;
      margin-bottom:16px;
      cursor:pointer;
      border:1px solid var(--border-default);
    }

    .theme-section-header:hover {
      background:var(--bg-hover);
    }

    .theme-section-title {
      font-size:18px;
      font-weight:700;
      color:var(--accent-light);
    }

    .theme-section-icon {
      font-size:22px;
      transition:transform 0.2s ease;
    }

    .theme-section-header.collapsed .theme-section-icon {
      transform:rotate(-90deg);
    }

    .theme-section-content {
      overflow:hidden;
      transition:max-height 0.3s ease;
    }

    .theme-section-content.collapsed {
      max-height:0 !important;
    }

    .theme-inner {
      background:var(--bg-secondary);
      border:1px solid var(--border-default);
      border-radius:12px;
      padding:24px;
    }

    .theme-grid {
      display:grid;
      grid-template-columns:repeat(auto-fit, minmax(140px,1fr));
      gap:16px;
      margin-top:20px;
    }

    .theme-option {
      background:var(--bg-card);
      border:3px solid var(--border-default);
      border-radius:12px;
      padding:16px;
      cursor:pointer;
      transition:all 0.2s;
      text-align:center;
      pointer-events:auto;
    }

    .theme-option:hover {
      border-color:var(--border-hover);
      transform:translateY(-2px);
    }

    .theme-option.active {
      border-color:var(--accent-primary);
      box-shadow:0 0 0 3px rgba(59,130,246,0.25);
    }

    .theme-preview {
      width:100%;
      height:70px;
      border-radius:8px;
      margin-bottom:12px;
      display:flex;
      gap:4px;
      padding:8px;
    }

    .theme-preview-bar {
      flex:1;
      border-radius:4px;
    }

    .theme-name {
      font-size:13px;
      font-weight:600;
    }

    .theme-description {
      font-size:11px;
      color:var(--text-secondary);
    }

    /* ---- Dark Blue Preview ---- */
    .theme-dark-blue .theme-preview { background:#0b0f14; }
    .theme-dark-blue .theme-preview-bar:nth-child(1){background:#1a2535;}
    .theme-dark-blue .theme-preview-bar:nth-child(2){background:#3b82f6;}
    .theme-dark-blue .theme-preview-bar:nth-child(3){background:#60a5fa;}
  </style>
</head>

<body>

<!-- APPEARANCE & THEMES -->
<div class="theme-section-header collapsed" onclick="toggleThemeSection(event)">
  <div class="theme-section-title">Appearance & Themes</div>
  <div class="theme-section-icon">â–¼</div>
</div>

<div class="theme-section-content collapsed" id="themeSectionContent">
  <div class="theme-inner">

    <div class="theme-grid">
      <div class="theme-option theme-dark-blue active"
           onclick="event.stopPropagation(); setTheme('dark-blue')">
        <div class="theme-preview">
          <div class="theme-preview-bar"></div>
          <div class="theme-preview-bar"></div>
          <div class="theme-preview-bar"></div>
        </div>
        <div class="theme-name">Dark Blue</div>
        <div class="theme-description">Default</div>
      </div>

      <div class="theme-option theme-dark-green"
           onclick="event.stopPropagation(); setTheme('dark-green')">
        <div class="theme-preview">
          <div class="theme-preview-bar"></div>
          <div class="theme-preview-bar"></div>
          <div class="theme-preview-bar"></div>
        </div>
        <div class="theme-name">Dark Green</div>
        <div class="theme-description">Forest</div>
      </div>

      <div class="theme-option theme-dark-purple"
           onclick="event.stopPropagation(); setTheme('dark-purple')">
        <div class="theme-preview">
          <div class="theme-preview-bar"></div>
          <div class="theme-preview-bar"></div>
          <div class="theme-preview-bar"></div>
        </div>
        <div class="theme-name">Dark Purple</div>
        <div class="theme-description">Violet</div>
      </div>
    </div>

  </div>
</div>

<script>
/* ---------------- THEME LOGIC ---------------- */

function toggleThemeSection(e) {
  const content = document.getElementById('themeSectionContent');
  const header = e.currentTarget;

  content.classList.toggle('collapsed');
  header.classList.toggle('collapsed');

  content.style.maxHeight = content.classList.contains('collapsed')
    ? '0px'
    : content.scrollHeight + 'px';

  localStorage.setItem(
    'theme_section_state',
    content.classList.contains('collapsed') ? 'collapsed' : 'expanded'
  );
}

function setTheme(theme) {
  localStorage.setItem('app-theme', theme);
  document.documentElement.setAttribute('data-theme', theme);

  document.querySelectorAll('.theme-option').forEach(opt => {
    opt.classList.toggle(
      'active',
      opt.classList.contains(`theme-${theme}`)
    );
  });
}

function loadTheme() {
  const theme = localStorage.getItem('app-theme') || 'dark-blue';
  document.documentElement.setAttribute('data-theme', theme);

  document.querySelectorAll('.theme-option').forEach(opt => {
    opt.classList.toggle(
      'active',
      opt.classList.contains(`theme-${theme}`)
    );
  });
}

/* Restore accordion state */
(function restoreThemeSection() {
  const state = localStorage.getItem('theme_section_state');
  const content = document.getElementById('themeSectionContent');
  const header = document.querySelector('.theme-section-header');

  if (state === 'expanded') {
    content.classList.remove('collapsed');
    header.classList.remove('collapsed');
    content.style.maxHeight = content.scrollHeight + 'px';
  }
})();

loadTheme();
</script>

</body>
</html>
