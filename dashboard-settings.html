<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Settings</title>
  <link rel="stylesheet" href="theme-system.css">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: system-ui;
      background: var(--bg-primary);
      color: var(--text-primary);
    }
    
    .mobile-top-header {
      display: none;
      position: sticky;
      top: 0;
      z-index: 100;
      background: var(--bg-secondary);
      border-bottom: 1px solid var(--border-default);
    }
    
    .mobile-header-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px;
    }
    
    .mobile-header-title {
      font-size: 18px;
      font-weight: 600;
    }
    
    .desktop-header {
      position: sticky;
      top: 0;
      z-index: 100;
      background: var(--bg-primary);
      border-bottom: 1px solid var(--border-default);
    }
    
    .desktop-header-top {
      padding: 16px 24px 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .desktop-header h1 {
      font-size: 32px;
      font-weight: 600;
      margin: 0;
    }
    
    .logout-link {
      color: var(--text-secondary);
      cursor: pointer;
      font-size: 14px;
      text-decoration: none;
    }
    
    .logout-link:hover {
      color: var(--accent-primary);
    }
    
    nav {
      display: flex;
      gap: 24px;
      padding: 0 24px 12px;
      overflow-x: auto;
    }
    
    nav a {
      padding: 12px 0;
      color: var(--text-secondary);
      text-decoration: none;
      font-size: 14px;
      white-space: nowrap;
      border-bottom: 2px solid transparent;
      transition: all 0.2s;
    }
    
    nav a.active {
      color: var(--accent-primary);
      border-bottom-color: var(--accent-primary);
    }
    
    .main {
      padding: 20px;
      max-width: 900px;
      margin: 0 auto;
    }
    
    .card {
      background: var(--bg-secondary);
      border: 1px solid var(--border-default);
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 20px;
    }
    
    .card h2 {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 20px;
      color: var(--accent-light);
    }
    
    /* Collapsible Section */
    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px;
      background: var(--bg-card);
      border-radius: 12px;
      margin-bottom: 20px;
      cursor: pointer;
      transition: all 0.2s;
      border: 1px solid var(--border-default);
    }
    
    .section-header:hover {
      background: var(--bg-hover);
    }
    
    .section-header-title {
      font-size: 20px;
      font-weight: 700;
      color: var(--accent-light);
    }
    
    .section-header-icon {
      font-size: 24px;
      color: var(--text-secondary);
      transition: transform 0.2s;
    }
    
    .section-header.collapsed .section-header-icon {
      transform: rotate(-90deg);
    }
    
    .section-content {
      overflow: hidden;
      transition: max-height 0.3s ease;
      margin-bottom: 20px;
    }
    
    .section-content.collapsed {
      max-height: 0 !important;
    }
    
    .section-inner {
      background: var(--bg-secondary);
      border: 1px solid var(--border-default);
      border-radius: 12px;
      padding: 24px;
    }
    
    .setting-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px 0;
      border-bottom: 1px solid var(--border-default);
    }
    
    .setting-row:last-child {
      border-bottom: none;
    }
    
    .setting-label {
      font-size: 14px;
      font-weight: 500;
    }
    
    .setting-description {
      font-size: 12px;
      color: var(--text-secondary);
      margin-top: 4px;
    }
    
    /* Theme Picker Styles */
    .theme-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 16px;
      margin-top: 20px;
    }
    
    .theme-option {
      background: var(--bg-card);
      border: 3px solid var(--border-default);
      border-radius: 12px;
      padding: 16px;
      cursor: pointer;
      transition: all 0.2s;
      text-align: center;
    }
    
    .theme-option:hover {
      border-color: var(--border-hover);
      transform: translateY(-2px);
    }
    
    .theme-option.active {
      border-color: var(--accent-primary);
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }
    
    .theme-preview {
      width: 100%;
      height: 70px;
      border-radius: 8px;
      margin-bottom: 12px;
      display: flex;
      gap: 4px;
      padding: 8px;
    }
    
    .theme-preview-bar {
      flex: 1;
      border-radius: 4px;
    }
    
    .theme-name {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 4px;
      color: var(--text-primary);
    }
    
    .theme-description {
      font-size: 11px;
      color: var(--text-secondary);
    }
    
    /* Dark Theme Previews */
    .theme-dark-blue .theme-preview { background: #0b0f14; }
    .theme-dark-blue .theme-preview-bar:nth-child(1) { background: #1a2535; }
    .theme-dark-blue .theme-preview-bar:nth-child(2) { background: #3b82f6; }
    .theme-dark-blue .theme-preview-bar:nth-child(3) { background: #60a5fa; }
    
    .theme-dark-green .theme-preview { background: #0a1410; }
    .theme-dark-green .theme-preview-bar:nth-child(1) { background: #1a2f25; }
    .theme-dark-green .theme-preview-bar:nth-child(2) { background: #10b981; }
    .theme-dark-green .theme-preview-bar:nth-child(3) { background: #34d399; }
    
    .theme-dark-purple .theme-preview { background: #100b14; }
    .theme-dark-purple .theme-preview-bar:nth-child(1) { background: #2d1a35; }
    .theme-dark-purple .theme-preview-bar:nth-child(2) { background: #8b5cf6; }
    .theme-dark-purple .theme-preview-bar:nth-child(3) { background: #a78bfa; }
    
    .theme-dark-grey .theme-preview { background: #0f0f0f; }
    .theme-dark-grey .theme-preview-bar:nth-child(1) { background: #252525; }
    .theme-dark-grey .theme-preview-bar:nth-child(2) { background: #6b7280; }
    .theme-dark-grey .theme-preview-bar:nth-child(3) { background: #9ca3af; }
    
    .theme-dark-teal .theme-preview { background: #0a1214; }
    .theme-dark-teal .theme-preview-bar:nth-child(1) { background: #1a3035; }
    .theme-dark-teal .theme-preview-bar:nth-child(2) { background: #14b8a6; }
    .theme-dark-teal .theme-preview-bar:nth-child(3) { background: #2dd4bf; }
    
    .theme-dark-crimson .theme-preview { background: #140a0b; }
    .theme-dark-crimson .theme-preview-bar:nth-child(1) { background: #351a1d; }
    .theme-dark-crimson .theme-preview-bar:nth-child(2) { background: #dc2626; }
    .theme-dark-crimson .theme-preview-bar:nth-child(3) { background: #ef4444; }
    
    /* Light Theme Previews */
    .theme-light-blue .theme-preview { background: #f8fafc; }
    .theme-light-blue .theme-preview-bar:nth-child(1) { background: #f1f5f9; }
    .theme-light-blue .theme-preview-bar:nth-child(2) { background: #3b82f6; }
    .theme-light-blue .theme-preview-bar:nth-child(3) { background: #2563eb; }
    
    .theme-light-green .theme-preview { background: #f7fef9; }
    .theme-light-green .theme-preview-bar:nth-child(1) { background: #f0fdf4; }
    .theme-light-green .theme-preview-bar:nth-child(2) { background: #10b981; }
    .theme-light-green .theme-preview-bar:nth-child(3) { background: #059669; }
    
    .theme-light-purple .theme-preview { background: #faf5ff; }
    .theme-light-purple .theme-preview-bar:nth-child(1) { background: #f5f3ff; }
    .theme-light-purple .theme-preview-bar:nth-child(2) { background: #8b5cf6; }
    .theme-light-purple .theme-preview-bar:nth-child(3) { background: #7c3aed; }
    
    .theme-light-grey .theme-preview { background: #fafafa; }
    .theme-light-grey .theme-preview-bar:nth-child(1) { background: #f5f5f5; }
    .theme-light-grey .theme-preview-bar:nth-child(2) { background: #6b7280; }
    .theme-light-grey .theme-preview-bar:nth-child(3) { background: #4b5563; }
    
    .theme-light-teal .theme-preview { background: #f0fdfa; }
    .theme-light-teal .theme-preview-bar:nth-child(1) { background: #ccfbf1; }
    .theme-light-teal .theme-preview-bar:nth-child(2) { background: #14b8a6; }
    .theme-light-teal .theme-preview-bar:nth-child(3) { background: #0d9488; }
    
    .theme-light-crimson .theme-preview { background: #fef2f2; }
    .theme-light-crimson .theme-preview-bar:nth-child(1) { background: #fee2e2; }
    .theme-light-crimson .theme-preview-bar:nth-child(2) { background: #dc2626; }
    .theme-light-crimson .theme-preview-bar:nth-child(3) { background: #b91c1c; }
    
    input[type="text"],
    input[type="email"],
    input[type="tel"],
    select {
      padding: 10px 14px;
      border-radius: 8px;
      border: 2px solid var(--border-default);
      background: var(--bg-card);
      color: var(--text-primary);
      font-size: 14px;
      font-family: system-ui;
      min-width: 200px;
    }
    
    input:focus, select:focus {
      outline: none;
      border-color: var(--accent-primary);
    }
    
    button {
      padding: 10px 20px;
      border-radius: 8px;
      border: 2px solid var(--border-default);
      background: var(--bg-card);
      color: var(--text-primary);
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      font-family: system-ui;
    }
    
    button:hover {
      border-color: var(--accent-primary);
      background: var(--accent-primary);
      color: white;
    }
    
    .save-btn {
      background: var(--accent-primary);
      border-color: var(--accent-primary);
      color: white;
      width: 100%;
      margin-top: 20px;
    }
    
    .mobile-bottom-nav {
      display: none;
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--bg-secondary);
      padding: 8px;
      z-index: 100;
      border-top: 1px solid var(--border-default);
    }
    
    .mobile-nav-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 6px;
      margin-bottom: 6px;
    }
    
    .mobile-nav-secondary {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 6px;
    }
    
    .mobile-nav-btn {
      padding: 10px 8px;
      border-radius: 8px;
      border: 1px solid var(--border-default);
      background: var(--bg-card);
      color: var(--text-secondary);
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      text-decoration: none;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 44px;
    }
    
    .mobile-nav-grid .mobile-nav-btn {
      background: var(--nav-green);
    }
    
    .mobile-nav-btn.active {
      background: var(--nav-active);
      border-color: var(--nav-active);
      color: white;
    }
    
    @media (max-width: 768px) {
      .desktop-header { display: none; }
      .mobile-top-header { display: block; }
      .mobile-bottom-nav { display: block; }
      body { padding-bottom: 110px; }
      .main { padding: 12px; }
      
      .theme-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
      }
      
      .theme-option {
        padding: 12px;
      }
      
      .theme-preview {
        height: 60px;
      }
      
      .setting-row {
        flex-direction: column;
        align-items: flex-start;
        gap: 12px;
      }
      
      input[type="text"],
      input[type="email"],
      input[type="tel"],
      select {
        width: 100%;
        min-width: auto;
      }
    }
    
    @media (min-width: 769px) {
      .mobile-top-header { display: none !important; }
      .mobile-bottom-nav { display: none !important; }
    }
  </style>
</head>
<body>

<div class="mobile-top-header">
  <div class="mobile-header-bar">
    <div class="mobile-header-title">Settings</div>
    <a class="logout-link" onclick="logout()">Logout</a>
  </div>
</div>

<div class="desktop-header">
  <div class="desktop-header-top">
    <h1>Settings</h1>
    <a class="logout-link" onclick="logout()">Logout</a>
  </div>
  <nav>
    <a href="dashboard-business.html">Business</a>
    <a href="dashboard-customer-search.html">Customers</a>
    <a href="dashboard-vehicle-search.html">Vehicles</a>
    <a href="dashboard-settings-with-themes.html" class="active">Settings</a>
  </nav>
</div>

<div class="main">
  
  <!-- Company Information -->
  <div class="card">
    <h2>Company Information</h2>
    
    <div class="setting-row">
      <div>
        <div class="setting-label">Company Name</div>
        <div class="setting-description">Your business name</div>
      </div>
      <input type="text" value="My Auto Shop" placeholder="Company Name">
    </div>
    
    <div class="setting-row">
      <div>
        <div class="setting-label">Email</div>
        <div class="setting-description">Primary contact email</div>
      </div>
      <input type="email" value="contact@myshop.com" placeholder="Email">
    </div>
    
    <div class="setting-row">
      <div>
        <div class="setting-label">Phone</div>
        <div class="setting-description">Main phone number</div>
      </div>
      <input type="tel" value="(555) 123-4567" placeholder="Phone">
    </div>
    
    <div class="setting-row">
      <div>
        <div class="setting-label">Address</div>
        <div class="setting-description">Shop location</div>
      </div>
      <input type="text" value="123 Main St, City, ST 12345" placeholder="Address">
    </div>
  </div>
  
  <!-- User Preferences -->
  <div class="card">
    <h2>User Preferences</h2>
    
    <div class="setting-row">
      <div>
        <div class="setting-label">Default Dashboard</div>
        <div class="setting-description">Which dashboard to show on login</div>
      </div>
      <select>
        <option value="business">Business</option>
        <option value="service">Service</option>
        <option value="parts">Parts</option>
        <option value="sales">Sales</option>
      </select>
    </div>
    
    <div class="setting-row">
      <div>
        <div class="setting-label">Date Format</div>
        <div class="setting-description">How dates are displayed</div>
      </div>
      <select>
        <option value="mdy">MM/DD/YYYY</option>
        <option value="dmy">DD/MM/YYYY</option>
        <option value="ymd">YYYY-MM-DD</option>
      </select>
    </div>
    
    <div class="setting-row">
      <div>
        <div class="setting-label">Time Format</div>
        <div class="setting-description">12-hour or 24-hour clock</div>
      </div>
      <select>
        <option value="12h">12-hour (3:00 PM)</option>
        <option value="24h">24-hour (15:00)</option>
      </select>
    </div>
  </div>
  
  <!-- Appearance - Collapsible on Mobile -->
  <div class="section-header collapsed" onclick="toggleSection('appearance')">
    <div class="section-header-title">Appearance & Themes</div>
    <div class="section-header-icon">â–¼</div>
  </div>
  <div class="section-content collapsed" id="appearanceContent">
    <div class="section-inner">
      <div class="setting-row">
        <div>
          <div class="setting-label">Choose Your Color Theme</div>
          <div class="setting-description">Click any theme to apply it globally</div>
        </div>
      </div>
      
      <div class="theme-grid">
        <div class="theme-option theme-dark-blue active" onclick="setTheme('dark-blue')">
          <div class="theme-preview">
            <div class="theme-preview-bar"></div>
            <div class="theme-preview-bar"></div>
            <div class="theme-preview-bar"></div>
          </div>
          <div class="theme-name">Dark Blue</div>
          <div class="theme-description">Default</div>
        </div>
        
        <div class="theme-option theme-dark-green" onclick="setTheme('dark-green')">
          <div class="theme-preview">
            <div class="theme-preview-bar"></div>
            <div class="theme-preview-bar"></div>
            <div class="theme-preview-bar"></div>
          </div>
          <div class="theme-name">Dark Green</div>
          <div class="theme-description">Forest</div>
        </div>
        
        <div class="theme-option theme-dark-purple" onclick="setTheme('dark-purple')">
          <div class="theme-preview">
            <div class="theme-preview-bar"></div>
            <div class="theme-preview-bar"></div>
            <div class="theme-preview-bar"></div>
          </div>
          <div class="theme-name">Dark Purple</div>
          <div class="theme-description">Violet</div>
        </div>
        
        <div class="theme-option theme-dark-grey" onclick="setTheme('dark-grey')">
          <div class="theme-preview">
            <div class="theme-preview-bar"></div>
            <div class="theme-preview-bar"></div>
            <div class="theme-preview-bar"></div>
          </div>
          <div class="theme-name">Dark Grey</div>
          <div class="theme-description">Monochrome</div>
        </div>
        
        <div class="theme-option theme-dark-teal" onclick="setTheme('dark-teal')">
          <div class="theme-preview">
            <div class="theme-preview-bar"></div>
            <div class="theme-preview-bar"></div>
            <div class="theme-preview-bar"></div>
          </div>
          <div class="theme-name">Dark Teal</div>
          <div class="theme-description">Ocean</div>
        </div>
        
        <div class="theme-option theme-dark-crimson" onclick="setTheme('dark-crimson')">
          <div class="theme-preview">
            <div class="theme-preview-bar"></div>
            <div class="theme-preview-bar"></div>
            <div class="theme-preview-bar"></div>
          </div>
          <div class="theme-name">Dark Crimson</div>
          <div class="theme-description">Burgundy</div>
        </div>
        
        <div class="theme-option theme-light-blue" onclick="setTheme('light-blue')">
          <div class="theme-preview">
            <div class="theme-preview-bar"></div>
            <div class="theme-preview-bar"></div>
            <div class="theme-preview-bar"></div>
          </div>
          <div class="theme-name">Light Blue</div>
          <div class="theme-description">Sky</div>
        </div>
        
        <div class="theme-option theme-light-green" onclick="setTheme('light-green')">
          <div class="theme-preview">
            <div class="theme-preview-bar"></div>
            <div class="theme-preview-bar"></div>
            <div class="theme-preview-bar"></div>
          </div>
          <div class="theme-name">Light Green</div>
          <div class="theme-description">Mint</div>
        </div>
        
        <div class="theme-option theme-light-purple" onclick="setTheme('light-purple')">
          <div class="theme-preview">
            <div class="theme-preview-bar"></div>
            <div class="theme-preview-bar"></div>
            <div class="theme-preview-bar"></div>
          </div>
          <div class="theme-name">Light Purple</div>
          <div class="theme-description">Lavender</div>
        </div>
        
        <div class="theme-option theme-light-grey" onclick="setTheme('light-grey')">
          <div class="theme-preview">
            <div class="theme-preview-bar"></div>
            <div class="theme-preview-bar"></div>
            <div class="theme-preview-bar"></div>
          </div>
          <div class="theme-name">Light Grey</div>
          <div class="theme-description">Slate</div>
        </div>
        
        <div class="theme-option theme-light-teal" onclick="setTheme('light-teal')">
          <div class="theme-preview">
            <div class="theme-preview-bar"></div>
            <div class="theme-preview-bar"></div>
            <div class="theme-preview-bar"></div>
          </div>
          <div class="theme-name">Light Teal</div>
          <div class="theme-description">Aqua</div>
        </div>
        
        <div class="theme-option theme-light-crimson" onclick="setTheme('light-crimson')">
          <div class="theme-preview">
            <div class="theme-preview-bar"></div>
            <div class="theme-preview-bar"></div>
            <div class="theme-preview-bar"></div>
          </div>
          <div class="theme-name">Light Crimson</div>
          <div class="theme-description">Rose</div>
        </div>
      </div>
    </div>
  </div>
  
  <button class="save-btn">Save All Settings</button>
  
</div>

<div class="mobile-bottom-nav">
  <div class="mobile-nav-grid">
    <a href="dashboard-business.html" class="mobile-nav-btn">Business</a>
    <a href="dashboard-customer-search-with-themes.html" class="mobile-nav-btn">Customers</a>
    <a href="dashboard-vehicle-search.html" class="mobile-nav-btn">Vehicles</a>
    <button class="mobile-nav-btn active">Settings</button>
  </div>
  <div class="mobile-nav-secondary">
    <a href="dashboard-service.html" class="mobile-nav-btn">Service</a>
    <a href="dashboard-parts.html" class="mobile-nav-btn">Parts</a>
    <a href="dashboard-sales.html" class="mobile-nav-btn">Sales</a>
  </div>
</div>

<script>
function logout() {
  localStorage.removeItem("sb_access_token");
  location.replace("login.html");
}

function toggleSection(sectionId) {
  const content = document.getElementById(sectionId + 'Content');
  const header = event.currentTarget;
  
  content.classList.toggle('collapsed');
  header.classList.toggle('collapsed');
  
  if (!content.classList.contains('collapsed')) {
    content.style.maxHeight = content.scrollHeight + 'px';
  } else {
    content.style.maxHeight = '0px';
  }
  
  localStorage.setItem('section_' + sectionId, content.classList.contains('collapsed') ? 'collapsed' : 'expanded');
}

// Theme System
function setTheme(theme) {
  // Save to localStorage
  localStorage.setItem('app-theme', theme);
  
  // Apply to document
  document.documentElement.setAttribute('data-theme', theme);
  
  // Update active state
  document.querySelectorAll('.theme-option').forEach(opt => {
    opt.classList.remove('active');
  });
  const activeTheme = document.querySelector(`.theme-${theme}`);
  if (activeTheme) {
    activeTheme.classList.add('active');
  }
  
  // Show confirmation
  console.log(`Theme changed to: ${theme}`);
}

// Load saved theme on page load
function loadTheme() {
  const savedTheme = localStorage.getItem('app-theme') || 'dark-blue';
  document.documentElement.setAttribute('data-theme', savedTheme);
  
  // Set active state
  document.querySelectorAll('.theme-option').forEach(opt => {
    opt.classList.remove('active');
  });
  const activeTheme = document.querySelector(`.theme-${savedTheme}`);
  if (activeTheme) {
    activeTheme.classList.add('active');
  }
}

// Initialize
loadTheme();

// Load section state
const saved = localStorage.getItem('section_appearance');
const content = document.getElementById('appearanceContent');
const header = document.querySelector(`[onclick="toggleSection('appearance')"]`);

if (saved === 'expanded') {
  if (header) header.classList.remove('collapsed');
  content.classList.remove('collapsed');
  content.style.maxHeight = content.scrollHeight + 'px';
}
</script>

</body>
</html>
