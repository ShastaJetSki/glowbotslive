<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin - GlowbotsLive</title>

 <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body { height:100vh; background:#000; overflow:hidden; font-family: system-ui; }
    .brand { position: fixed; top: 15px; left: 20px; color: #5af2ff; font-size: 28px; font-weight: 700; text-shadow: 0 0 12px #00eaff; z-index: 10000; }
    .nav { position: fixed; top: 15px; right: 25px; z-index:10000; }
    .nav a { color:#5af2ff; margin-left:25px; font-size:20px; text-decoration:none; text-shadow:0 0 10px #00eaff; transition:opacity .3s; }
    .nav a:hover { opacity:0.6; }
    .bot-wrapper { position: fixed; bottom: 20px; left: 20px; width: 30%; height: auto; z-index: 2; pointer-events: none; }
    .bot-img { width:100%; display:block; }
    #voice-button {
      position:fixed; left:50%; bottom:50%; transform:translateX(-50%);
      width:120px; height:120px; border-radius:50%; border:none; cursor:pointer;
      background: radial-gradient(circle at 30% 30%, #c77dff, #a855f7 45%, #7e22ce);
      box-shadow:0 10px 40px rgba(168,85,247,0.5), inset 0 -8px 20px rgba(0,0,0,0.2), inset 0 8px 20px rgba(255,255,255,0.15);
      transition:all .3s ease; z-index:9999; color:white; font-weight:bold; font-size:18px;
    }
    #voice-button:hover { 
      transform:translateX(-50%) scale(1.1); 
      box-shadow:0 15px 50px rgba(168,85,247,0.7), inset 0 -8px 20px rgba(0,0,0,0.2), inset 0 8px 20px rgba(255,255,255,0.15);
    }
    #voice-button.listening {
      animation:subtlepulse 3s ease-in-out infinite;
    }
    @keyframes subtlepulse { 
      0%, 100% { 
        box-shadow:0 10px 40px rgba(168,85,247,0.5), inset 0 -8px 20px rgba(0,0,0,0.2), inset 0 8px 20px rgba(255,255,255,0.15);
        opacity: 1;
      } 
      50% { 
        box-shadow:0 10px 60px rgba(168,85,247,0.8), inset 0 -8px 20px rgba(0,0,0,0.2), inset 0 8px 20px rgba(255,255,255,0.15);
        opacity: 0.85;
      }
    }
    .status { position:fixed; left:50%; bottom:40%; transform:translateX(-50%);
      color:#5af2ff; font-size:22px; text-shadow:0 0 10px #00eaff; opacity:0.9; z-index:9999; text-align:center; }
</style>
</head>
<body>
    <div class="brand">GlowbotsLive</div>

  <div class="nav">
    <a href="index.html">Neon9</a>
    <a href="service.html">Service</a>
    <a href="admin.html">Admin</a>
  </div>

  <div class="bot-wrapper"><img src="glowbot.png" class="bot-img" alt="robot"></div>
    <button id="voice-button"></button>
    <div class="status" id="status">Neon9</div>

    <!-- Official UMD bundle for Vapi Web SDK (exposes window.Vapi) -->
    <script src="https://cdn.jsdelivr.net/gh/balacodeio/Vapi-Web-UMD@latest/dist/latest/vapi-web-bundle.min.js"></script>

    <script>
      const button = document.getElementById('voice-button');
      const status = document.getElementById('status');

      let vapi = null;

      // Wait for SDK to load, then initialize
      function initVapi() {
        if (window.Vapi) {
          vapi = new window.Vapi("b66ad6e7-ec9d-421c-88b7-157068b27f6d"); // Your public key
          status.textContent = "Push to speak to agent";
          console.log("Sunny yellow test version loaded & ready");

          // Official event handlers
          vapi.on("call-start", () => {
            button.classList.add("listening");
            status.textContent = "Listening… speak now!";
          });

          vapi.on("call-end", () => {
            button.classList.remove("listening");
            status.textContent = "Call ended — click again";
          });

          vapi.on("error", (e) => {
            console.error("Vapi error:", e);
            status.textContent = "Error — check console";
            button.classList.remove("listening");
          });
        } else {
          status.textContent = "SDK failed to load — reload page";
          console.error("Vapi SDK not found — check network or script path");
        }
      }

      // Load SDK if not already, then init
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initVapi);
      } else {
        initVapi();
      }

      // Click toggles start/stop (official methods with correct string param)
      button.addEventListener("click", () => {
        if (!vapi) {
          status.textContent = "SDK not ready — wait or reload";
          return;
        }
        if (button.classList.contains("listening")) {
          vapi.stop();
        } else {
          status.textContent = "Connecting…";
          vapi.start("5dbee072-eb62-4aec-85de-4b6a7e454bf6"); // Your assistant ID as direct string (fixes 400)
        }
      });
    </script>
  </body>
</html>
